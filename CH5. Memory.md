# CH5. Memory

- 프로그램과 데이터를 저장하는 장치
  - 주기억장치(main memory)
  - 보조저장장치(auxiliary storage device)



- **액세스 시간(access time)**: 주소와 쓰기/읽기 신호가 도착한 순간부터 데이터 액세스가 완료되는 순간까지의 시간

- **전송 단위(unit of transfer)**: CPU가 한 번의 기억장치 액세스에 의해 읽거나 쓸 수 있는 비트 수

  - 주기억장치: 단어(word) 단위
  - 보조저장장치: 블록(512 바이트 혹은 1K 바이트) 단위

- **기억장치시스템을 설계할 때 고려할 특성들**

  - (1) 용량(capacity)
  - (2) 액세스 속도

- **주소지정 단위(addressable unit)**: 주소가 지정된 각 기억 장소 당 저장되는 데이터 길이

  - <u>바이트</u> 단위 혹은 <u>단어</u> 단위
  - 주소 비트의 수 $A$, 주소지정 단위의 수 $N$과 의 관계: $2^A=N$

- **데이터 전송률(data transfer rate)**: 기억장치로부터 초당 액세스할 수 있는 비트 수

  - <u>(1/액세스 시간) X (한 번에 읽혀지는 데이터 비트 수)</u>

  - (예) 액세스 시간 = 100ns, 액세스 단위 = 32비트

    데이터 전송률 = (1/100ns) X 32 = 320[MBits/sec]



## 5.1 기억장치의 분류와 특성

- **기억장치 액세스(memory access)**: CPU가 어떤 정보를 기억장치에 쓰거나 기억장치로부터 읽는 동작



### 5.1.1 기억장치의 액세스 유형

- 보조저장장치의 액세스 방식
  - **순차적 액세스(sequential access)**: 기억장치에 저장된 정보를 처음부터 순서대로 액세스하는 방식.
    - (예) 자기 테이프
  - **직접 액세스(direct access)**: 읽기/쓰기 장치가 액세스할 위치 근처로 이동, 순차적 검색을 통하여 최종 위치에 도달하는 방식
    - (예) 디스크, CD-ROM, DVD
- 주기억장치의 액세스 방식
  - **임의 액세스(random access)**: 주소로 직접 기억 장소를 찾아 액세스, 어떤 기억 장소든 액세스하는 시간이 동일
    - (예) 반도체 기억장치, RAM, ROM
  - **연관 액세스(associative access)**: 저장된 내용의 특정 비트들(태그)을 비교, 일치하는 내용에 액세스
    - (예) 연관 기억장치(associative memory) - cache



### 5.1.2 기억장치의 유형

- 메모리
  - 반도체
    - 메인 메모리, RAM
    - ROM
  - 보조기억장치
    - 하드 디스크, CD-ROM



- 제조 재료로 분류하기
  - **반도체 기억장치(semiconductor memory)**: 반도체 물질인 실리콘(Si) 칩을 이용한 기억장치
    - (예) RAM, ROM, 플래시 메모리
  - **자기-표면 기억장치(magnetic-surface memory)**: 자화 물질로 코팅된 표면에 정보를 저장하는 기억장치
    - (예) 디스크



- 데이터를 저장하는 성질로 분류하기
  - **휘발성 기억장치(volatile memory)**: 전원 공급이 중단되면 내용이 사라지는 기억장치
    - (예) RAM
  - **비휘발성 기억장치(nonvolatile memory)**: 전원 공급에 관계없는 영구 저장장치
    - (예) ROM, 디스크, SSD



- **삭제 불가능 기억장치(non=erasable memory)**: 내용 변경이 불가능한 기억장치
  - (예) ROM



## 5.2 계층적 기억장치시스템

- 계층적 기억장치시스템(hierarchical memory system)
  - CPU 레지스터 - 캐시 - 주기억장치 - 하드 디스크 및 SSD - 자기 테이프 및 CD-ROM
- 기억장치의 분류
  - 내부 기억장치(internal memory) : CPU가 직접 액세스할 수 있음
    - (예) CPU 레지스터, 캐시, 주기억장치
  - 외부 기억장치(external memory): 장치 제어기(device contoller)를 통해 액세스할 수 있음
    - (예) 하드 디스크 및 SSD, 자기 테이프 및 CD-ROM



### 5.2.1 필요성 및 효과

- 계층화의 필요성: 기억장치들은 성능, 용량, 가격이 매우 다양하므로 적절히 구성하는 것이 필요
- 계층화의 효과: 기억장치 시스템의 성능 대 가격비(performance/cost ratio) 향상



**기억장치의 특성**

- 액세스 속도가 높아질수록, 비트당 가격은 높아진다.
- 용량이 커질수록, 비트당 가격은 낮아진다.
- 용량이 커질수록, 액세스 시간은 길어진다.



**게층적 기억장치시스템의 기본 구성 방법**

- 첫번째 계층 기억장치: 속도가 빠름. 가격은 높음.
- 두번째 계층 기억장치: 속도가 느림. 가격이 낮음.



**지역성의 원리**

- 기억장치의 액세스가 몇몇 특정 영역에 집중되는 현상
- 지역성의 원리에 의해, 첫번째 계층의 기억장치에 대한 액세스 횟수가 두번째 계층의 기억장치에 대한 액세스 횟수가 훨씬 더 많음.
- 계층적 기억장치시스템에서 지역성의 원리가 적용되는 경우, 평균 기억장치 액세스 시간이 단축됨.



### 5.2.2 기억장치 계층

- 상위 계층으로 올라갈수록 용량이 작아지고, 비트당 가격이 높아지고, 액세스 시간이 짧아지며 액세스 빈도가 높아진다.
- 하위 계층으로 내려갈수록 용량이 커지고, 비트당 가격이 떨어지며, 지역성의 원리로 인해 액세스 빈도가 낮아진다.



**캐시 메모리**

- 주기억장치의 액세스 속도는 CPU에 비하여 현저히 느리다.
- 즉, 주기억장치로부터 데이터를 읽어오는 동안 CPU가 오랫동안 기다려야한다.
- 성능 저하를 줄이기 위해, <u>CPU와 주기억장치 사이에 고속의 반도체 기억장치</u>를 설치한다.



**2-단계 계층적 기억장치**

- 첫번째 계층 기억장치는 저용량, 고속이며 두번째 계층 기억장치는 대용량, 저속이다.

- 첫번째 계층에 액세스하고, 없다면 두번째 계층에 액세스한다.

- (예) 첫번째 계층 액세스 시간 = 10ns, 두번째 계층 액세스 시간 = 100ns

  액세스할 정보가 첫번째 계층 기억장치에 있을 확률 = 50%

  평균 기억장치 액세스 시간 = (0.5 X 10ns) + (0.5 X 100ns) = 55ns



## 5.3 반도체 기억장치

### 5.3.1 RAM(Random Access Memory)

- 임의 액세스 방식을 사용
- 반도체 직접회로 기억장치(semiconductor IC memory)
- 데이터의 읽기/쓰기가 가능
- 휘발성(volatile)



**제조 기술에 따른 RAM 분류**

- (1) DRAM(Dynamic RAM)
  - capacitor에 전하(charge)를 충전하는 방식으로 데이터를 저장하는 기억 소자들(memory cells)로 구성 : 집적 밀도가 높음.
  - 데이터의 저장 상태를 유지하기 위해 주기적인 재충전(refresh) 필요
  - 직접 밀도가 더 높으며, 같은 용량의 SRAM보다 비트당 가격이 더 저렴.
  - 용량이 큰 주기억장치로 사용
- (2) RAM(Static RAM)
  - 기억 소자로서 플립-플롭(flip-flop)을 이용 : 직접 밀도가 낮음
  - 전력이 공급되는 동안 재충전 없이도 데이터 유지 가능
  - DRAM보다 더 빠름
  - 높은 속도가 필요한 캐시 메모리로 사용



**1K X 8  칩과 제어 신호들**

- 1K = 1024 = $2^{10}$
- 제어 신호들: 칩 선택 신호(CS), 읽기 신호(RD), 쓰기 신호(WR)
- 주소 버스: 10비트
- 데이터 버스: 8비트

| $CS$ | $RD$ | $WR$ | RAM의 동작    |
| ---- | ---- | ---- | ------------- |
| 0    | X    | X    | 선택되지 않음 |
| 1    | 1    | 0    | 읽기 동작     |
| 1    | 0    | 1    | 쓰기 동작     |



**64-bit RAM의 내부 조직 예시들**

(1) 8 X 8 비트 조직

- $2^3$ X 8 : 주소 비트의 수(주소 버스의 폭) = 3, 데이터 입출력 선의 수(데이터 버스의 폭) = 8
- 주소 버스로부터 3비트 주소 - 3X8 해독기 - 8개의 8비트 기억장소 - 데이터 버스로 8비트 주소
- 용량에 따른 주소 비트수
  - 8Kbit RAM: 1K X 8비트 조직인 경우, 1K = $2^{10}$이므로 주소 = 10비트 필요
  - 1Mbit RAM: 128K X 8비트 조직인 경우, 1K = $2^{10}$, 128 = $2^7$이므로 주소 = 17비트 필요
  - 1Gbit RAM: 128M X 8비트 조직인 경우, 1M = K X K = $2^{10}$ X $2^{10}$, 128 = $2^7$이므로 주소 = 27비트 필요



(2) 16 X 4 비트 조직

- $2^4$ X 4 : 주소 비트의 수 = 4, 데이터 입출력 선의 수 = 4
- 주소 버스로부터 4비트 주소 - 4X16 해독기 - 16개의 4비트 기억장소 - 데이터 버스로 4비트 주소
- 용량에 따른 주소 비트수
  - 8Kbit RAM: 2K X 4비트 조직인 경우, 1K = $2^{10}$, 2 = $2^1$이므로 주소 = 11비트 필요
  - 1Mbit RAM: 256K X 4비트 조직인 경우, 1K = $2^{10}$, 256 = $2^8$이므로 주소 = 18비트 필요
  - 1Gbit RAM: 256M X 4비트 조직인 경우, 1M = K X K = $2^{10}$ X $2^{10}$, 256 = $2^8$이므로 주소 = 28비트 필요



(3) 64 X 1 비트 조직

- $2^6$ X 4 : 주소 비트의 수 = 6, 데이터 입출력 선의 수 = 1
- 상위 3비트 - 8개의 행 중 하나, 하위 3비트 - 8개의 열 중 하나
- 주소 버스로부터 6비트 - 두 개의 3X8 해독기 - 64개의 1비트 기억장소 - 데이터 버스로 1비트 주소
- 용량에 따른 주소 비트수
  - 8Kbit RAM: 8K X 1비트 조직인 경우, 1K = $2^{10}$, 8 = $2^3$이므로 주소 = 13비트 필요
  - 1Mbit RAM: 1M X 1비트 조직인 경우, 1M = K X K = $2^{10}$ X $2^{10}$이므로 주소 = 20비트 필요
  - 1Gbit RAM: 1G X 1비트 조직인 경우, 1G = K X K X K = $2^{10}$ X $2^{10}$ X $2^{10}$이므로 주소 = 30비트 필요



(4) 16M X 4 비트 조직

- 16M=$2^4$X K X K = $2^4$ X $2^{10}$ X $2^{10}$ = $2^{24}$
- $2^{24}$ X 4 : 주소 비트의 수 = 24, 데이터 입출력 선의 수 = 1
  - RAS(Row Address Strobe) 신호와 CAS(Column Address Strobe) 신호를 이용, 칩으로 실제 입력되는 주소 비트의 수는 12
- $2^{12}$=4096개의 열과 4097개의 행. 각각의 칸에는 4비트 기억장소

- 주소 버스로부터 24비트 - 해독기들 - 16M=$2^{24}$개의 4비트 기억장소 - 데이터 버스로 4비트 주소



PPT 참고