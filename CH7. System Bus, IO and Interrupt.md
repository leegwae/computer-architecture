# CH7.  시스템 버스, I/O 및 인터럽트

## 7.1 시스템 버스(System Bus)

- 시스템 버스: 컴퓨터시스템의 구성 요소들(CPU, 기억장치, I/O 장치)를 상호 연결해주는 중심 통로



### 7.1.1 시스템 버스의 조직

- **버스(bus)**: 구성 요소들 간 교환할 각종 정보들을 전송하는 선(line)들로 구성
- 버스 선의 수 = 버스 폭
  - 한 번에 전송하는 데이터 비트들의 수. 기억장치 주소 비트들의 수 및 제어 신호들의 수에 따라 결정된다.
  - 소형 컴퓨터: 50~100개의 신호선들 사용
  - 중대형급 시스템: 100개 이상의 신호선들 사용
- 버스 대역폭(bus bandwidth): 단위 시간당 전송할 수 있는 데이터의 양(초당 몇 비트를 이동시킬 수 있는가)
  - 버스의 속도를 나타내는 척도. 
  - 버스 클록의 주기에 의해 결정
  - (예) 버스 클록의 주파수: 20MHz(클럭 주기: 50ns), 데이터 버스의 폭: 64비트(8바이트), 버스 대역폭=20MHz X 8 바이트 = 160 Mbtes/sec



$2^{10}$= K, $2^{20}$ = M, $2^{30}$ = G

#### 기능에 따른 버스의 종류

- (1) 주소 버스(address bus): CPU가 기억장치로 데이터 쓰기/읽기 동작을 할 때(혹은 기억장치로부터 CPU가 데이터 쓰기/읽기 동작을 할 때), 해당 기억장소를 지정하는 주소를 전송하기 위한 선들의 집합
  - 단방향 전송(unidirectional tarnsfer): CPU => 기억장치 및 I/O 제어기
  - 주소 버스의 비트 수($n$)에 의해 시스템에 접속될 수 있는 전체 기억장치의 용량이 결정됨
    - (예) 주소 버스: 16비트, 주소지정 가능한 최대 기억장소들의 수($2^{16}$=64K), 바이트 단위 주소지정일 경우 최대 기억장치 용량 = 64K 바이트, 32-비트 단위 주소시정일 경우 최대 기억장치 용량 = 256K 바이트
    - (예) 주소 버스: 30비트, 주소지정 가능한 최대 기억장소들의 수($2^{30}$=1G), 바이트 단위 주소지정일 경우 최대 기억장치 용량 = 1G 바이트, 32-비트 단위 주소시정일 경우 최대 기억장치 용량 = 4G 바이트
  - 직접 주소지정할 수 있는 기억장소의 단위: 바이트 혹은 단어
- (2) 데이터 버스(data bus): 시스템 요소들 사이에서 데이터를 전송하는데 사용되는 선들의 집합
  - 양방향 전송(bidirectional transfer)
  - 버스 폭 = CPU와 기억장치 사이에 한 번에 전송되는 비트 수
- (3) 제어 버스(control bus): CPU와 기억장치 및 I/O 장치 사이에 제어 신호들을 전송하는 선들의 집합



#### 제어 신호의 종류

- 일반 버스: 기억장치 및 I/O 장치와의 데이터 교환을 위한 제어신호들의 집합
  - (1) 기억장치 쓰기(memory write) 신호: 버스에 실린 데이터를 주소가 지정하는 기억장소에 저장되도록 하는 제어 신호
  - (2) 기억장치 읽기(memory read) 신호: 주소가 지정하는 기억장소의 내용을 읽어 버스에 실리게 하는 제어 신호
  - (3) I/O 쓰기(I/O write) 신호: 버스에 실린 데이터를 지정된 I/O 장치로 출력되게 하는 제어 신호
  - (4) I/O 읽기(I/O read) 신호: 지정된 I/O 장치로부터 데이터를 읽어 데이터 버스에 실리게 하는 제어 신호
- 중재 버스(arbitration bus): 버스 중재를 위한 제어 신호들의 집합
  - (1) 버스 요구(bus request) 신호: 버스 마스터가 버스 사용을 요구했음을 알리는 신호(BREQ)
  - (2) 버스 승인(bus grant) 신호: 버스 사용을 요구한 마스터에게 사용을 허가하는 신호(BGNT)
  - (3) 버스 사용중(bus busy) 신호: (다른 마스터가 버스를 사용하지 못하도록) 현재 버스가 사용되고 있음을 나타내는 신호(BBUSY)
  - 버스 마스터(bus master): 시스템 버스에 접속되는 요소 중, 버스 사용의 주체가 되는 요소들(CPU, 기억장치 모듈, I/O 제어기 등)
  - 버스 중재(bus arbitration): 시스템 버스에 접속된 두 개 이상의 버스 마서트들이 동시에 버스를 사용하고자 할 때, 순서대로 한 개의 마스터씩 버스를 사용할 수 있게 해주는 동작
- 인터럽트 버스(interrupt bus): 인터럽트 메커니즘을 위한 제어 신호들의 집합. 
  - (1) 인터럽트 요구(interrupt request) 신호: I/O 장치가 인터럽트를 요구했음을 알리는 신호(I/O 제어기가 CPU로 보냄)
  - (2) 인터럽트 확인(interrput achkowledge) 신호: CPU가 인터럽트 요구를 인식했음을 알리는 신호(CPU가 I/O 제어기로 보냄)
- 버스 클록(bus clock) 신호: 동기식 버스에서 버스 동작들의 시간을 일치시키기 위하여 제공되는 공통 클록 신호
- 리셋 신호(reset) 신호: 모든 시스템 요소들의 동작을 초기화시키는 신호